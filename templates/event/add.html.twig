{% extends 'layout.html.twig' %}

{% block title %}{{ parent() }} | {{ title }}{% endblock %}

{% block main %}
        <div>
        <h3>Cr√©er une sortie !</h3>
    </div>
    <div>
        {{ form_start(sortieForm) }}
        <div>
            {{ form_label(sortieForm.nom) }}
            {{ form_widget(sortieForm.nom) }}
            {{ form_errors(sortieForm.nom) }}
        </div>
        <div>
            {{ form_label(sortieForm.dateHeureDebut) }}
            {{ form_widget(sortieForm.dateHeureDebut) }}
            {{ form_errors(sortieForm.dateHeureDebut) }}
        </div>
        <div>
            {{ form_label(sortieForm.duree) }}
            {{ form_widget(sortieForm.duree) }}
            {{ form_errors(sortieForm.duree) }}
        </div>
        <div>
            {{ form_label(sortieForm.dateLimiteInscription) }}
            {{ form_widget(sortieForm.dateLimiteInscription) }}
            {{ form_errors(sortieForm.dateLimiteInscription) }}
        </div>
        <div>
            {{ form_label(sortieForm.nbInscriptionsMax) }}
            {{ form_widget(sortieForm.nbInscriptionsMax) }}
            {{ form_errors(sortieForm.nbInscriptionsMax) }}
        </div>
        <div>
            {{ form_label(sortieForm.infosSortie) }}
            {{ form_widget(sortieForm.infosSortie) }}
            {{ form_errors(sortieForm.infosSortie) }}
        </div>
        <div>
            {{ form_label(sortieForm.ville) }}
            {{ form_widget(sortieForm.ville) }}
            {{ form_errors(sortieForm.ville) }}
        </div>
        <div>
            {{ form_label(sortieForm.lieu) }}
            {{ form_widget(sortieForm.lieu) }}
            {{ form_errors(sortieForm.lieu) }}
        </div>
        <div>

        </div>
        <div>

        </div>

        <div>
            <label>Site : </label>
            {{ app.user.site.nom }}
        </div>
        <div>
            <button name="enregistrer" type="submit">Enregistrer</button>
            {{ form_label(sortieForm.publier) }}
            {{ form_widget(sortieForm.publier) }}
            <!--<button name="publier" type="submit">Publier la sortie</button>-->
            {{ form_end(sortieForm) }}
            <a href="{{ path('list') }}" ><button type="button">Annuler</button></a>
        </div>
    </div>
    <script>
        $('#sortie_ville').onchange(function(e) {
            var cp = $('#cp').val();
            $.ajax({
                url: "villes.php?cp="+cp,
                cache: false
            })
                .done(function( data ) {
                    $('#villes').empty();
                    data.forEach(function(ville) {
                        $('#villes').append($('<li>'+ville+'</li>'));
                    });
                });
            e.preventDefault();
        });
    </script>
{% endblock %}

